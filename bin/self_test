#!/usr/bin/env php
<?php

declare(strict_types=1);

use JUIT\GDC\ServiceContainer;

require_once __DIR__ . '/../vendor/autoload.php';

/** @var ServiceContainer $serviceContainer */
$serviceContainer = require __DIR__ . '/_services.php';

$piFace = $serviceContainer->getPiFace();
while (true) {
    /** @var \JUIT\PiFace\PiFace $piFace */
    $state = $piFace->readInputPins();
    $pins = [];
    for ($i = 0; $i < 8; ++$i) {
        $pins[] = $state->isPinOn($i) ? '1' : '0';
    }
    echo implode(' ', $pins) . PHP_EOL;
    usleep(500000);
}
